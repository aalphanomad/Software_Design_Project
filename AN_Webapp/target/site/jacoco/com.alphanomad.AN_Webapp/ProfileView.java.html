<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ProfileView.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">AN_Webapp</a> &gt; <a href="index.source.html" class="el_package">com.alphanomad.AN_Webapp</a> &gt; <span class="el_source">ProfileView.java</span></div><h1>ProfileView.java</h1><pre class="source lang-java linenums">package com.alphanomad.AN_Webapp;

import com.google.gson.JsonObject;
import com.vaadin.navigator.View;
import com.vaadin.navigator.ViewChangeListener.ViewChangeEvent;
import com.vaadin.ui.Button;
import com.vaadin.ui.HorizontalLayout;
import com.vaadin.ui.Label;
import com.vaadin.ui.Notification;
import com.vaadin.ui.Panel;
import com.vaadin.ui.UI;
import com.vaadin.ui.VerticalLayout;


/**
 * This view is the view which shows the profile
 * it shows the users name and email and all subjects they are linked to
 */
public class ProfileView extends VerticalLayout implements View{

<span class="fc" id="L21">    public ProfileView(MyUI ui) {</span>
    	
<span class="fc" id="L23">    }</span>
    
	/*
	 * @Override public void enter(ViewChangeEvent event) {
	 * this.removeAllComponents(); //TODO: Replace this with actual data String
	 * stud_num = &quot;&quot;; MyUI ui = (MyUI) getUI(); ui.get_user_info(); stud_num =
	 * ui.get_user_info().get_student_num(); Notification.show(stud_num);
	 * 
	 * DBHelper dbh = new DBHelper();
	 * 
	 * 
	 * String[] params = {&quot;student_num&quot;} ; String[] values = {stud_num}; String name
	 * = dbh.php_request(&quot;get_name&quot;, params, values);
	 * 
	 * params = new String[] {&quot;student_num&quot;,&quot;name&quot;} ; values = new String[]
	 * {stud_num,name}; String courses = dbh.php_request(&quot;get_courses&quot;, params,
	 * values); JsonObject courses_obj = dbh.parse_json_string(courses);
	 * 
	 * Button home_button = new Button(&quot;go to main view&quot;, btn_event -&gt;
	 * getUI().getNavigator().navigateTo(&quot;main&quot;));
	 * 
	 * addComponent(make_user_info_panel(name, stud_num));
	 * addComponent(make_courses_panel(courses_obj)); addComponent(home_button); }
	 */
    
    
   
    /**
     * simple function to make a view that shows the users email and name
     * @param name
     * @param student_number
     * @return a Vertical layout to be added to a page
     */
    public Panel make_user_info_panel(String name, String student_number)
    {
<span class="fc" id="L58">    	Panel panel = new Panel();</span>
<span class="fc" id="L59">    	VerticalLayout inner = new VerticalLayout();</span>
    	
    	
<span class="fc" id="L62">    	HorizontalLayout stud_num_line = new HorizontalLayout();</span>
<span class="fc" id="L63">    	stud_num_line.addComponent(new Label(&quot;Student Number:&quot;));</span>
<span class="fc" id="L64">    	stud_num_line.addComponent(new Label(student_number));</span>
    	
<span class="fc" id="L66">    	HorizontalLayout email_line = new HorizontalLayout();</span>
<span class="fc" id="L67">    	email_line.addComponent(new Label(&quot;Email Address:&quot;));</span>
<span class="fc" id="L68">    	email_line.addComponent(new Label(student_number+&quot;@students.wits.ac.za&quot;));</span>
    	
<span class="fc" id="L70">    	inner.addComponent(stud_num_line);</span>
<span class="fc" id="L71">    	inner.addComponent(email_line);</span>
    	
<span class="fc" id="L73">    	panel.setCaption(&quot;User Information&quot;);</span>
<span class="fc" id="L74">    	panel.setContent(inner);</span>
<span class="fc" id="L75">    	return panel;</span>
    }
    
    /**
     * 
     * @param courses a Json Object
     * @return a vertical layout containing a collapseable list of courses that the user is linked to
     */
    public Panel make_courses_panel(JsonObject courses)
    {
<span class="fc" id="L85">    	Panel panel = new Panel();</span>
<span class="fc" id="L86">    	VerticalLayout courses_inner = new VerticalLayout();</span>
    	try
    	{
<span class="fc" id="L89">    		JsonObject data = courses.getAsJsonArray(&quot;result&quot;).get(0).getAsJsonObject();</span>
        	
        	
        	
<span class="fc bfc" id="L93" title="All 2 branches covered.">        	for(String j : data.keySet())</span>
        	{
        		try
        		{
<span class="fc" id="L97">        			courses_inner.addComponent(new Label (data.get(j).getAsString()+&quot;\n&quot;));</span>
        		}
<span class="fc" id="L99">        		catch(UnsupportedOperationException e)</span>
        		{
        			//courses_inner.addComponent(new Label(&quot;probs null value&quot;));
<span class="fc" id="L102">        		}</span>
        		
<span class="fc" id="L104">        	}</span>
    	}
<span class="fc" id="L106">    	catch (Exception e) {</span>
			// TODO: handle exception
<span class="fc" id="L108">		}</span>
    	
    	
<span class="fc" id="L111">    	panel.setCaption(&quot;Courses&quot;);</span>
<span class="fc" id="L112">    	panel.setContent(courses_inner);</span>
    	
    	
<span class="fc" id="L115">    	return panel;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>