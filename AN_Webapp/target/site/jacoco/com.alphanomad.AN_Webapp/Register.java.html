<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Register.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">AN_Webapp</a> &gt; <a href="index.source.html" class="el_package">com.alphanomad.AN_Webapp</a> &gt; <span class="el_source">Register.java</span></div><h1>Register.java</h1><pre class="source lang-java linenums">package com.alphanomad.AN_Webapp;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashSet;
import java.util.List;

import javax.servlet.annotation.WebServlet;

import org.vaadin.addons.ComboBoxMultiselect;

import com.vaadin.annotations.Theme;
import com.vaadin.annotations.VaadinServletConfiguration;
import com.vaadin.navigator.View;
import com.vaadin.server.UserError;
import com.vaadin.server.VaadinRequest;
import com.vaadin.server.VaadinServlet;
import com.vaadin.shared.ui.ContentMode;
import com.vaadin.ui.Alignment;
import com.vaadin.ui.Button;
import com.vaadin.ui.CheckBox;
import com.vaadin.ui.CheckBoxGroup;
import com.vaadin.ui.Component;
import com.vaadin.ui.FormLayout;
import com.vaadin.ui.Label;
import com.vaadin.ui.Notification;
import com.vaadin.ui.Panel;
import com.vaadin.ui.PasswordField;
import com.vaadin.ui.TextField;
import com.vaadin.ui.UI;
import com.vaadin.ui.VerticalLayout;
import com.vaadin.ui.themes.ValoTheme;


@Theme(&quot;mytheme&quot;)
public class Register extends VerticalLayout implements View {

    public TextField Name, StudentNumber;
    public PasswordField Password;
	public PasswordField ConfPassword;
<span class="fc" id="L41">    ComboBoxMultiselect &lt; String &gt; comboBoxMultiselect = new ComboBoxMultiselect &lt; &gt; ();</span>
<span class="fc" id="L42">    FormLayout content = new FormLayout();</span>

    public void TheRegister() {
<span class="fc" id="L45">    	ArrayList&lt;String&gt;FCourses=new ArrayList&lt;String&gt;();</span>
<span class="fc" id="L46">    	String[] Courses=comboBoxMultiselect.getValue().toString().split(&quot;,&quot;);</span>
<span class="fc" id="L47">    	ArrayList&lt;String&gt;DummyCourses=new ArrayList&lt;String&gt;();</span>

    
<span class="fc" id="L50">   Boolean valid=true;</span>
<span class="fc" id="L51">        Name.setComponentError(null);</span>
<span class="fc" id="L52">        StudentNumber.setComponentError(null);</span>
<span class="fc" id="L53">        Password.setComponentError(null);;</span>
<span class="fc" id="L54">        ConfPassword.setComponentError(null);</span>

<span class="pc bpc" id="L56" title="1 of 2 branches missed.">        if (Name.isEmpty()) {</span>
<span class="fc" id="L57">            Name.setComponentError(new UserError(&quot;Please Enter Your Name&quot;));</span>
<span class="fc" id="L58">            valid=false;</span>
        }
<span class="pc bpc" id="L60" title="1 of 2 branches missed.">        if (StudentNumber.isEmpty()) {</span>
<span class="fc" id="L61">            StudentNumber.setComponentError(new UserError(&quot;Please Enter Your Student Number&quot;));</span>
<span class="fc" id="L62">            valid=false;</span>

        }
<span class="pc bpc" id="L65" title="1 of 2 branches missed.">        if (!Password.getValue().equals(ConfPassword.getValue())) {</span>
<span class="nc" id="L66">            ConfPassword.setComponentError(new UserError(&quot;Passwords Do Not Match.&quot;));</span>
<span class="nc" id="L67">            valid=false;</span>

        }
<span class="pc bpc" id="L70" title="1 of 2 branches missed.">        if (Password.isEmpty()) {</span>
<span class="fc" id="L71">            Password.setComponentError(new UserError(&quot;Please Enter Your Password&quot;));</span>
<span class="fc" id="L72">            valid=false;</span>

        }
<span class="pc bpc" id="L75" title="1 of 2 branches missed.">        if (ConfPassword.isEmpty()) {</span>
<span class="fc" id="L76">            ConfPassword.setComponentError(new UserError(&quot;Please Confirm Your Password&quot;));</span>
<span class="fc" id="L77">            valid=false;</span>

        }
<span class="pc bpc" id="L80" title="1 of 2 branches missed.">        if(Courses.length==1) {</span>
<span class="fc" id="L81">        	comboBoxMultiselect.setComponentError(new UserError(&quot;Please Select Atleast One Course&quot;));</span>
<span class="fc" id="L82">        	valid=false;</span>
        }
<span class="pc bpc" id="L84" title="1 of 2 branches missed.">        if(valid) {</span>
<span class="nc bnc" id="L85" title="All 2 branches missed.">    	for(int i=0;i&lt;Courses.length;i++) {</span>
<span class="nc" id="L86">    		String[] newCourses=Courses[i].split(&quot;-&quot;);</span>
<span class="nc" id="L87">    		DummyCourses.add(newCourses[0].toString());</span>
    		    	}
<span class="nc" id="L89">    		    	DummyCourses.set(0, DummyCourses.get(0).substring(1, DummyCourses.get(0).length()));</span>
<span class="nc" id="L90">        String email=StudentNumber.getValue().toString()+&quot;@students.wits.ac.za&quot;;</span>
        
<span class="nc" id="L92">        String[] values=new String[DummyCourses.size()+5];</span>
<span class="nc" id="L93">        values[0]=Name.getValue().toString();</span>
<span class="nc" id="L94">        values[1]=StudentNumber.getValue().toString();</span>
<span class="nc" id="L95">        values[2]=email;</span>
<span class="nc" id="L96">        values[3]=Password.getValue().toString();</span>

        
<span class="nc bnc" id="L99" title="All 2 branches missed.">        for(int i=4;i&lt;4+DummyCourses.size();i++) {</span>
<span class="nc" id="L100">        	values[i]=DummyCourses.get(i-4);</span>
        }
<span class="nc" id="L102">        values[3+DummyCourses.size()+1]=&quot;0&quot;;</span>
        
<span class="nc bnc" id="L104" title="All 2 branches missed.">        if(DummyCourses.size()==1) {</span>
<span class="nc" id="L105">        	String[] params= {&quot;name&quot;,&quot;student_num&quot;,&quot;email&quot;,&quot;password&quot;,&quot;course1&quot;,&quot;role&quot;};</span>
<span class="nc" id="L106">        	DBHelper dbh = new DBHelper();</span>
<span class="nc" id="L107">        	String ans=dbh.php_request(&quot;create&quot;, params, values);</span>
<span class="nc" id="L108">        	Notification.show(ans);</span>

	
<span class="nc" id="L111">        }</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">        else if(DummyCourses.size()==2) {</span>
<span class="nc" id="L113">        	String[] params= {&quot;name&quot;,&quot;student_num&quot;,&quot;email&quot;,&quot;password&quot;,&quot;course1&quot;,&quot;course2&quot;,&quot;role&quot;};</span>
<span class="nc" id="L114">        	DBHelper dbh = new DBHelper();</span>
<span class="nc" id="L115">        	String ans=dbh.php_request(&quot;create&quot;, params, values);</span>
<span class="nc" id="L116">        	Notification.show(ans);</span>


<span class="nc" id="L119">        }</span>
<span class="nc bnc" id="L120" title="All 2 branches missed.">        else if(DummyCourses.size()==3) {</span>
<span class="nc" id="L121">        	String[] params= {&quot;name&quot;,&quot;student_num&quot;,&quot;email&quot;,&quot;password&quot;,&quot;course1&quot;,&quot;course2&quot;,&quot;course3&quot;,&quot;role&quot;};</span>
<span class="nc" id="L122">        	DBHelper dbh = new DBHelper();</span>
<span class="nc" id="L123">        	String ans=dbh.php_request(&quot;create&quot;, params, values);</span>
<span class="nc" id="L124">        	Notification.show(ans);</span>


<span class="nc" id="L127">        }</span>
<span class="nc bnc" id="L128" title="All 2 branches missed.">        else if(DummyCourses.size()==4) {</span>
<span class="nc" id="L129">        	String[] params= {&quot;name&quot;,&quot;student_num&quot;,&quot;email&quot;,&quot;password&quot;,&quot;course1&quot;,&quot;course2&quot;,&quot;course3&quot;,&quot;course4&quot;,&quot;role&quot;};</span>
<span class="nc" id="L130">        	DBHelper dbh = new DBHelper();</span>
<span class="nc" id="L131">        	String ans=dbh.php_request(&quot;create&quot;, params, values);</span>
<span class="nc" id="L132">        	Notification.show(ans);</span>


<span class="nc" id="L135">        }</span>
        else {
<span class="nc" id="L137">        	String[] params= {&quot;name&quot;,&quot;student_num&quot;,&quot;email&quot;,&quot;password&quot;,&quot;course1&quot;,&quot;course2&quot;,&quot;course3&quot;,&quot;course4&quot;,&quot;course5&quot;,&quot;role&quot;};</span>
<span class="nc" id="L138">        	DBHelper dbh = new DBHelper();</span>
<span class="nc" id="L139">        	String ans=dbh.php_request(&quot;create&quot;, params, values);</span>
<span class="nc" id="L140">        	Notification.show(ans);</span>

        }
        }


<span class="fc" id="L146">    }</span>
<span class="fc" id="L147">    public Register() {</span>

<span class="fc" id="L149">        Panel panel = new Panel();</span>
<span class="fc" id="L150">        panel.setHeight(&quot;600px&quot;);</span>
<span class="fc" id="L151">        panel.setWidthUndefined();</span>
<span class="fc" id="L152">        addComponent(panel);</span>
<span class="fc" id="L153">        setComponentAlignment(panel, Alignment.MIDDLE_CENTER);</span>

<span class="fc" id="L155">        content.addStyleName(&quot;Template&quot;);</span>
<span class="fc" id="L156">        content.setMargin(true);</span>

<span class="fc" id="L158">        Label test = new Label(&quot;&lt;p style = \&quot;font-family:georgia,garamond,serif;font-size:30px;\&quot;&gt;\r\n&quot; +</span>
            &quot;       &lt;b&gt;&lt;u&gt;Register&lt;/u&gt;&lt;/b&gt; &quot; +
            &quot;      &lt;/p&gt;&quot;, ContentMode.HTML);
<span class="fc" id="L161">        content.addComponent(test);</span>
<span class="fc" id="L162">        content.setComponentAlignment(test, Alignment.TOP_CENTER);</span>


<span class="fc" id="L165">        Name = new TextField();</span>
<span class="fc" id="L166">        Name.setCaption(&quot;Name&quot;);</span>
<span class="fc" id="L167">        Name.setWidth(&quot;330px&quot;);</span>
<span class="fc" id="L168">        Name.setPlaceholder(&quot;Name&quot;);</span>
<span class="fc" id="L169">        content.addComponent(Name);</span>
<span class="fc" id="L170">        content.setComponentAlignment(Name, Alignment.MIDDLE_CENTER);</span>




<span class="fc" id="L175">        StudentNumber = new TextField();</span>
<span class="fc" id="L176">        StudentNumber.setCaption(&quot;Student Number&quot;);</span>
<span class="fc" id="L177">        StudentNumber.setWidth(&quot;330px&quot;);</span>
<span class="fc" id="L178">        StudentNumber.setPlaceholder(&quot;Student Number&quot;);</span>
<span class="fc" id="L179">        content.addComponent(StudentNumber);</span>
<span class="fc" id="L180">        content.setComponentAlignment(StudentNumber, Alignment.MIDDLE_CENTER);</span>


<span class="fc" id="L183">        Password = new PasswordField();</span>
<span class="fc" id="L184">        Password.setCaption(&quot;Password&quot;);</span>
<span class="fc" id="L185">        Password.setWidth(&quot;330px&quot;);</span>
<span class="fc" id="L186">        Password.setPlaceholder(&quot;Password&quot;);</span>
<span class="fc" id="L187">        content.addComponent(Password);</span>
<span class="fc" id="L188">        content.setComponentAlignment(Password, Alignment.MIDDLE_CENTER);</span>


<span class="fc" id="L191">        ConfPassword = new PasswordField();</span>
<span class="fc" id="L192">        ConfPassword.setCaption(&quot;Confirm Password&quot;);</span>
<span class="fc" id="L193">        ConfPassword.setWidth(&quot;330px&quot;);</span>
<span class="fc" id="L194">        ConfPassword.setPlaceholder(&quot;Confirm Password&quot;);</span>
<span class="fc" id="L195">        content.addComponent(ConfPassword);</span>
<span class="fc" id="L196">        content.setComponentAlignment(ConfPassword, Alignment.MIDDLE_CENTER);</span>


<span class="fc" id="L199">        CheckBox PMA = new CheckBox(&quot;Are you on Postgraduate Merit Award(PMA)?&quot;, false);</span>
<span class="fc" id="L200">        PMA.addValueChangeListener(event-&gt;</span>
<span class="nc bnc" id="L201" title="All 2 branches missed.">            PMA.setValue(!PMA.getValue()));</span>
<span class="fc" id="L202">        content.addComponent(PMA);</span>
<span class="fc" id="L203">        content.setComponentAlignment(PMA, Alignment.BOTTOM_LEFT);</span>

        //FILE UPLOAD!!!!!						
        // Initialize a list with items
<span class="fc" id="L207">        List &lt; String &gt; list = new ArrayList &lt; String &gt; ();</span>
<span class="fc" id="L208">        list.add(&quot;COMS1016-(Discrete Computational Structures)&quot;);</span>
<span class="fc" id="L209">        list.add(&quot;COMS2002-(Database Fundementals)&quot;);</span>
<span class="fc" id="L210">        list.add(&quot;COMS2013-(Mobile Computing)&quot;);</span>
<span class="fc" id="L211">        list.add(&quot;COMS2014-(Computer Networks)&quot;);</span>
<span class="fc" id="L212">        list.add(&quot;COMS2015-(Analysis of Algorithms)&quot;);</span>
<span class="fc" id="L213">        list.add(&quot;COMS3003-(Formal Languages and Automata)&quot;);</span>
<span class="fc" id="L214">        list.add(&quot;COMS3005-(Advanced Analysis of Algorithms)&quot;);</span>
<span class="fc" id="L215">        list.add(&quot;COMS3009-(Software Design)&quot;);</span>
<span class="fc" id="L216">        list.add(&quot;COMS3010-(Operating Systems &amp; System Programming)&quot;);</span>
<span class="fc" id="L217">        list.add(&quot;COMS3007-(Machine Learning)&quot;);</span>
<span class="fc" id="L218">        list.add(&quot;COMS3006-(Computer Graphics &amp; Vis.)&quot;);</span>
<span class="fc" id="L219">        list.add(&quot;COMS3008-Parallel Computing)&quot;);</span>
<span class="fc" id="L220">        list.add(&quot;COMS3011-(Software Design Project)&quot;);</span>

        // Initialize the ComboBoxMultiselect
<span class="fc" id="L223">        comboBoxMultiselect.setPlaceholder(&quot;Courses&quot;);</span>
<span class="fc" id="L224">        comboBoxMultiselect.setWidth(&quot;430px&quot;);</span>
<span class="fc" id="L225">        comboBoxMultiselect.setCaption(&quot;Please Select The Courses You Would Like to Tutor(Max. 5&quot;);</span>
<span class="fc" id="L226">        comboBoxMultiselect.setItems(list);</span>
<span class="fc" id="L227">        content.addComponent(comboBoxMultiselect);</span>
<span class="fc" id="L228">        panel.setContent(content);</span>
<span class="fc" id="L229">        Button button = new Button(&quot;Register&quot;,</span>
<span class="nc" id="L230">            event-&gt; TheRegister());</span>

<span class="fc" id="L232">        content.addComponent(button);</span>
<span class="fc" id="L233">    }</span>


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>